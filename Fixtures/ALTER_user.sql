CREATE TABLE IF NOT EXISTS "user_new" (
	"id"	integer NOT NULL,
	"account_id"	integer NOT NULL,
	"deleted"	integer NOT NULL DEFAULT '0',
	"name"	varchar(30) NOT NULL,
	"level"	integer NOT NULL,
	"exp"	integer NOT NULL,
	"genre_id"	integer NOT NULL,
	"race_id"	integer NOT NULL,
	"class_id"	integer NOT NULL,
	"home_id"	integer NOT NULL,
	"description"	varchar(255) DEFAULT NULL,
	"gold"	integer NOT NULL,
	"bank_gold"	integer NOT NULL DEFAULT '0',
	"free_skillpoints"	integer NOT NULL,
	"pets_saved"	integer NOT NULL DEFAULT '0',
	"votes_amount"	integer DEFAULT '0',
	"spouse"	varchar(30) NOT NULL DEFAULT '',
	"message_info"	varchar(512) DEFAULT '',
	"pos_map"	integer NOT NULL,
	"pos_x"	integer NOT NULL,
	"pos_y"	integer NOT NULL,
	"body_id"	integer NOT NULL,
	"head_id"	integer NOT NULL,
	"weapon_id"	integer NOT NULL,
	"helmet_id"	integer NOT NULL,
	"shield_id"	integer NOT NULL,
	"heading"	integer NOT NULL DEFAULT '3',
	"slot_armour"	integer DEFAULT NULL,
	"slot_weapon"	integer DEFAULT NULL,
	"slot_helmet"	integer DEFAULT NULL,
	"slot_shield"	integer DEFAULT NULL,
	"slot_ammo"	integer DEFAULT NULL,
	"slot_ship"	integer DEFAULT NULL,
	"slot_mount"	integer DEFAULT NULL,
	"slot_dm"	integer DEFAULT NULL,
	"slot_rm"	integer DEFAULT NULL,
	"slot_magic"	integer DEFAULT NULL,
	"slot_knuckles"	integer DEFAULT NULL,
	"slot_tool"	integer DEFAULT NULL,
	"min_hp"	integer NOT NULL,
	"max_hp"	integer NOT NULL,
	"min_man"	integer NOT NULL,
	"max_man"	integer NOT NULL,
	"min_sta"	integer NOT NULL,
	"max_sta"	integer NOT NULL,
	"min_ham"	integer NOT NULL,
	"max_ham"	integer NOT NULL,
	"min_sed"	integer NOT NULL,
	"max_sed"	integer NOT NULL,
	"min_hit"	integer NOT NULL,
	"max_hit"	integer NOT NULL,
	"killed_npcs"	integer NOT NULL DEFAULT '0',
	"killed_users"	integer NOT NULL DEFAULT '0',
	"invent_level"	integer NOT NULL DEFAULT '0',
	"is_naked"	integer NOT NULL DEFAULT '0',
	"is_poisoned"	integer NOT NULL DEFAULT '0',
	"is_incinerated"	integer NOT NULL DEFAULT '0',
	"is_dead"	integer NOT NULL DEFAULT '0',
	"is_sailing"	integer NOT NULL DEFAULT '0',
	"is_paralyzed"	integer NOT NULL DEFAULT '0',
	"is_silenced"	integer NOT NULL DEFAULT '0',
	"silence_minutes_left"	integer DEFAULT '0',
	"silence_elapsed_seconds"	integer DEFAULT '0',
	"is_mounted"	integer NOT NULL DEFAULT '0',
	"is_banned"	integer DEFAULT '0',
	"banned_by"	varchar(30) NOT NULL DEFAULT '',
	"ban_reason"	varchar(255) DEFAULT '',
	"counter_pena"	integer NOT NULL DEFAULT '0',
	"deaths"	integer NOT NULL DEFAULT '0',
	"pertenece_consejo_real"	integer NOT NULL DEFAULT '0',
	"pertenece_consejo_caos"	integer NOT NULL DEFAULT '0',
	"pertenece_real"	integer NOT NULL DEFAULT '0',
	"pertenece_caos"	integer NOT NULL DEFAULT '0',
	"ciudadanos_matados"	integer NOT NULL DEFAULT '0',
	"criminales_matados"	integer NOT NULL DEFAULT '0',
	"recibio_armadura_real"	integer NOT NULL DEFAULT '0',
	"recibio_armadura_caos"	integer NOT NULL DEFAULT '0',
	"recibio_exp_real"	integer NOT NULL DEFAULT '0',
	"recibio_exp_caos"	integer NOT NULL DEFAULT '0',
	"recompensas_real"	integer DEFAULT '0',
	"recompensas_caos"	integer DEFAULT '0',
	"reenlistadas"	integer NOT NULL DEFAULT '0',
	"fecha_ingreso"	timestamp NOT NULL DEFAULT current_timestamp,
	"nivel_ingreso"	integer DEFAULT NULL,
	"matados_ingreso"	integer DEFAULT NULL,
	"siguiente_recompensa"	integer DEFAULT NULL,
	"status"	integer DEFAULT '0',
	"guild_index"	integer DEFAULT '0',
	"guild_aspirant_index"	integer DEFAULT NULL,
	"guild_member_history"	varchar(1024) DEFAULT NULL,
	"guild_requests_history"	varchar(1024) DEFAULT NULL,
	"guild_rejected_because"	varchar(255) DEFAULT NULL,
	"chat_global"	integer DEFAULT '1',
	"chat_combate"	integer DEFAULT '1',
	"warnings"	integer NOT NULL DEFAULT '0',
	"elo"	integer NOT NULL DEFAULT '1000',
	"return_map"	integer NOT NULL DEFAULT '0',
	"return_x"	integer NOT NULL DEFAULT '0',
	"return_y"	integer NOT NULL DEFAULT '0',
	"last_logout"	integer NOT NULL DEFAULT 0,
	"is_locked_in_mao"	boolean DEFAULT 0,
	"is_logged"	boolean NOT NULL DEFAULT 0,
	"eth_wallet_id"	TEXT,
	UNIQUE("id","account_id","deleted"),
	PRIMARY KEY("id" AUTOINCREMENT),
	CONSTRAINT "fk_user_account" FOREIGN KEY("account_id") REFERENCES "account"("id") ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO user_new (account_id,
	deleted,
	name,
	level,
	exp,
	genre_id,
	race_id,
	class_id,
	home_id,
	description,
	gold,
	bank_gold,
	free_skillpoints,
	pets_saved,
	votes_amount,
	spouse,
	message_info,
	pos_map,
	pos_x,
	pos_y,
	body_id,
	head_id,
	weapon_id,
	helmet_id,
	shield_id,
	heading,
	slot_armour,
	slot_weapon,
	slot_helmet,
	slot_shield,
	slot_ammo,
	slot_ship,
	slot_mount,
	slot_dm,
	slot_rm,
	slot_magic,
	slot_knuckles,
	slot_tool,
	min_hp,
	max_hp,
	min_man,
	max_man,
	min_sta,
	max_sta,
	min_ham,
	max_ham,
	min_sed,
	max_sed,
	min_hit,
	max_hit,
	killed_npcs,
	killed_users,
	invent_level,
	is_naked,
	is_poisoned,
	is_incinerated,
	is_dead,
	is_sailing,
	is_paralyzed,
	is_silenced,
	silence_minutes_left,
	silence_elapsed_seconds,
	is_mounted,
	is_banned,
	banned_by,
	ban_reason,
	counter_pena,
	deaths,
	pertenece_consejo_real,
	pertenece_consejo_caos,
	pertenece_real,
	pertenece_caos,
	ciudadanos_matados,
	criminales_matados,
	recibio_armadura_real,
	recibio_armadura_caos,
	recibio_exp_real,
	recibio_exp_caos,
	recompensas_real,
	recompensas_caos,
	reenlistadas,
	fecha_ingreso,
	nivel_ingreso,
	matados_ingreso,
	siguiente_recompensa,
	status,
	guild_index,
	guild_aspirant_index,
	guild_member_history,
	guild_requests_history,
	guild_rejected_because,
	chat_global,
	chat_combate,
	warnings,
	elo,
	return_map,
	return_x,
	return_y,
	last_logout,
	eth_wallet_id) 
SELECT account_id,
	deleted,
	name,
	level,
	exp,
	genre_id,
	race_id,
	class_id,
	home_id,
	description,
	gold,
	bank_gold,
	free_skillpoints,
	pets_saved,
	votes_amount,
	spouse,
	message_info,
	pos_map,
	pos_x,
	pos_y,
	body_id,
	head_id,
	weapon_id,
	helmet_id,
	shield_id,
	heading,
	slot_armour,
	slot_weapon,
	slot_helmet,
	slot_shield,
	slot_ammo,
	slot_ship,
	slot_mount,
	slot_dm,
	slot_rm,
	slot_magic,
	slot_knuckles,
	slot_tool,
	min_hp,
	max_hp,
	min_man,
	max_man,
	min_sta,
	max_sta,
	min_ham,
	max_ham,
	min_sed,
	max_sed,
	min_hit,
	max_hit,
	killed_npcs,
	killed_users,
	invent_level,
	is_naked,
	is_poisoned,
	is_incinerated,
	is_dead,
	is_sailing,
	is_paralyzed,
	is_silenced,
	silence_minutes_left,
	silence_elapsed_seconds,
	is_mounted,
	is_banned,
	banned_by,
	ban_reason,
	counter_pena,
	deaths,
	pertenece_consejo_real,
	pertenece_consejo_caos,
	pertenece_real,
	pertenece_caos,
	ciudadanos_matados,
	criminales_matados,
	recibio_armadura_real,
	recibio_armadura_caos,
	recibio_exp_real,
	recibio_exp_caos,
	recompensas_real,
	recompensas_caos,
	reenlistadas,
	fecha_ingreso,
	nivel_ingreso,
	matados_ingreso,
	siguiente_recompensa,
	status,
	guild_index,
	guild_aspirant_index,
	guild_member_history,
	guild_requests_history,
	guild_rejected_because,
	chat_global,
	chat_combate,
	warnings,
	elo,
	return_map,
	return_x,
	return_y,
	last_logout,
	eth_wallet_id FROM user;

DROP TABLE user;
ALTER TABLE user_new RENAME TO user;
